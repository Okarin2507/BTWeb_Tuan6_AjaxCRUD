<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{admin/layout}">
<body>

	<section layout:fragment="content">
		<div class="card">
			<div class="card-header">
				<div class="row">
					<div class="col-6">
						<h3>List Categories</h3>
					</div>
					<div class="col-6 text-end">
						<a th:href="@{/admin/categories/add}" class="btn btn-primary">Add
							New Category</a>
					</div>
				</div>
			</div>
			<div class="card-body">
				<!-- Hiển thị thông báo (nếu có) -->
				<div th:if="${message}" class="alert alert-success" role="alert">
					<i>[[${message}]]</i>
				</div>

				<!-- Form tìm kiếm -->
				<form th:action="@{/admin/categories/searchpaginated}" method="get">
					<div class="input-group mb-3">
						<input type="text" class="form-control"
							placeholder="Enter category name to search..." name="name"
							th:value="${name}">
						<button class="btn btn-outline-secondary" type="submit">Search</button>
					</div>
				</form>

				<!-- Bảng hiển thị dữ liệu -->
				<table class="table table-striped table-bordered">
					<thead class="table-dark">
						<tr>
							<th>Category ID</th>
							<th>Name</th>
							<th>Actions</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="category : ${categoryPage.content}">
							<td th:text="${category.categoryId}"></td>
							<td th:text="${category.name}"></td>
							<td><a
								th:href="@{'/admin/categories/edit/' + ${category.categoryId}}"
								class="btn btn-outline-warning btn-sm">Edit</a> <a
								th:href="@{'/admin/categories/delete/' + ${category.categoryId}}"
								onclick="return confirm('Are you sure you want to delete this category?')"
								class="btn btn-outline-danger btn-sm">Delete</a></td>
						</tr>
					</tbody>
				</table>
			</div>
			<div class="card-footer text-muted"
				th:if="${categoryPage.totalPages > 0}">
				<nav aria-label="Page navigation">
					<ul class="pagination justify-content-center">
						<!-- Nút Previous -->
						<li class="page-item"
							th:classappend="${categoryPage.first} ? 'disabled'"><a
							class="page-link"
							th:href="@{/admin/categories/searchpaginated(name=${name}, page=${categoryPage.number}, size=${categoryPage.size})}">Previous</a>
						</li>

						<!-- Dãy số trang -->
						<li class="page-item" th:each="pageNumber : ${pageNumbers}"
							th:classappend="${pageNumber == categoryPage.number + 1} ? 'active'">
							<a class="page-link"
							th:href="@{/admin/categories/searchpaginated(name=${name}, page=${pageNumber}, size=${categoryPage.size})}"
							th:text="${pageNumber}"></a>
						</li>

						<!-- Nút Next -->
						<li class="page-item"
							th:classappend="${categoryPage.last} ? 'disabled'"><a
							class="page-link"
							th:href="@{/admin/categories/searchpaginated(name=${name}, page=${categoryPage.number + 2}, size=${categoryPage.size})}">Next</a>
						</li>
					</ul>
				</nav>
			</div>
		</div>
	</section>

</body>
</html>